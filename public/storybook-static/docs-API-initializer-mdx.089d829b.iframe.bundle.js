"use strict";(self.webpackChunk_adobe_commerce_elsie=self.webpackChunk_adobe_commerce_elsie||[]).push([[5964],{"../../node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>useMDXComponents,x:()=>MDXProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/preact/compat/dist/compat.module.js");const emptyComponents={},MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.Ay.createContext(emptyComponents);function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.Ay.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.Ay.useMemo((function(){return"function"==typeof components?components(contextComponents):{...contextComponents,...components}}),[contextComponents,components])}function MDXProvider(properties){let allComponents;return allComponents=properties.disableParentContext?"function"==typeof properties.components?properties.components(emptyComponents):properties.components||emptyComponents:useMDXComponents(properties.components),react__WEBPACK_IMPORTED_MODULE_0__.Ay.createElement(MDXContext.Provider,{value:allComponents},properties.children)}},"./src/docs/API/initializer.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MDXContent});__webpack_require__("../../node_modules/preact/compat/dist/compat.module.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/preact/compat/jsx-runtime.mjs"),_Users_bdenham_Sites_StorefrontSDK_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,_Users_bdenham_Sites_StorefrontSDK_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FK,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.W8,{title:"API/Initializer"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.di,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h1,{id:"initializer",children:"Initializer"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-typescript",children:"// my-dropin/initializer.ts\n\nimport { Initializer } from '@adobe-commerce/elsie/lib';\n// import { events } from '@adobe-commerce/event-bus';\n\ntype ConfigProps = {};\n\nexport const initialize = new Initializer<ConfigProps>({\n  init: async (config) => {\n    const defaultConfig = {};\n    initialize.config.setConfig({ ...defaultConfig, ...config });\n  },\n\n  listeners: () => [\n    // events.on('authenticated', (authenticated) => {\n    //   console.log('authenticated', authenticated);\n    // }),\n  ],\n});\n\nexport const config = initialize.config;\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-typescript",children:"// Host Site\nimport { initializers } from '@dropins/tools/initializer.js';\nimport { initialize as pkg } from 'my-dropin/initializer.js';\n\n// Register Packages\ninitializers.register(pkg, { ...config });\n\n// Mount Initializers\nwindow.addEventListener('load', initializers.mount);\n"})})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"setimageparamkeysparams",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"setImageParamKeys(params)"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["The ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"setImageParamKeys"})," method is part of the initializers module in the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"@dropins/tools"})," package.\nIt allows you to set image parameters globally for all drop-ins that use the Image component."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"default-behavior",children:"Default Behavior"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["By default, Fastly parameters are used if ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"setImageParamKeys"})," is not called or if no parameters are provided."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"parameters",children:"Parameters"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"params"})," - ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"{ [key: string]: string | ((data: any) => [string, string]) }"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"An object of key-value pairs to map image parameters to their respective keys in the URL."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"The value can be a string or a function that takes the parameter value as an argument and returns a tuple of the new key and transformed value."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"functionality",children:"Functionality"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If a parameter key is provided via ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"setImageParamKeys"}),", it is used in generating image URLs instead of the default Fastly parameters."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If a parameter key is not provided via ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"setImageParamKeys"}),", it is omitted from the generated image URLs."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If a mapped key is a function and it is not specified as a parameter in the Image component, it is called with ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"null"}),". It should return a tuple of the key and value."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"If a mapping callback is provided, the callback is called with the parameter value (if it exists) and should return a tuple of the new key and transformed value."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If a mapping callback returns ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"null"}),", the parameter is omitted from the generated image URLs."]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"usage",children:"Usage"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Call the setImageParamKeys() function before the register() and mount() functions in the application layer."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-javascript",children:"// Set global image parameters\ninitializers.setImageParamKeys({\n  // Re-map the width parameter to imgWidth\n  width: 'imgWidth',\n  // Transform the quality parameter\n  quality: (value) => ['imgQuality', value * 100],\n  // Add an additional parameter to the image URL\n  extraParam: () => ['extraParam', 'extraValue'],\n});\n\n// Register Initializers\ninitializers.register(pkg.initialize, {\n  langDefinitions,\n});\n\n// Mount Initializers\ninitializers.mount();\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Now, when a dropin uses the Image component to render an image with a width of 300 pixels and quality value of 0.8:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-jsx",children:"<Image\n  loading={'lazy'}\n  src={'https://example.com/image.jpg'}\n  alt={'Example Image'}\n  width=\"300\"\n  height=\"300\"\n  params={{ width: 300, quality: 0.8 }}\n/>\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"It renders the following image element:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-html",children:'<img\n  loading="lazy"\n  src="https://example.com/image.jpg"\n  srcset="https://example.com/image.jpg?imgWidth=300&imgQuality=80&extraParam=extraValue 768w, https://example.com/image.jpg?imgWidth=300&imgQuality=80&extraParam=extraValue 1024w, https://example.com/image.jpg?imgWidth=300&imgQuality=80&extraParam=extraValue 1366w, https://example.com/image.jpg?imgWidth=300&imgQuality=80&extraParam=extraValue 1920w"\n  alt="Example Image"\n  width="300"\n  height="300"\n/>\n'})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"In this example, the width parameter is mapped to imgWidth and the value of the quality parameter is modified and mapped to imgQuality."})]})}function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,_Users_bdenham_Sites_StorefrontSDK_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(MDXLayout,{...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_createMdxContent,{...props})}):_createMdxContent(props)}}}]);