---
const allComponents = [
  'Cart',
  'Checkout',
  'Order',
  'Payment Services',
  'Product details',
  'Storefront Compatibility Package',
  'User auth',
  'User account'
];
---

<div class="changelog-filter">
  <div class="filter-group">
    <label for="component-filter">Filter by Component:</label>
    <select id="component-filter" class="filter-select">
      <option value="">All Components</option>
      {allComponents.map(component => (
        <option value={component}>{component}</option>
      ))}
    </select>
  </div>
</div>

<script>
  const componentFilter = document.getElementById('component-filter') as HTMLSelectElement | null;
  const entries = document.querySelectorAll<HTMLElement>('.changelog-entry');

  function filterEntries() {
    if (!componentFilter) return;

    const selectedComponent = componentFilter.value;

    entries.forEach(entry => {
      const components = entry.getAttribute('data-components')?.split(',') || [];
      const componentMatch = !selectedComponent || components.includes(selectedComponent);

      if (entry instanceof HTMLElement) {
        entry.style.display = componentMatch ? 'block' : 'none';
      }
    });
  }

  if (componentFilter) {
    componentFilter.addEventListener('change', filterEntries);
  }
</script>