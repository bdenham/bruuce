---
interface Props {
  date: string;
  title: string;
  components: string[];
}

const { date, title, components } = Astro.props;

// Parse the date as local time to avoid timezone issues
const [year, month, day] = date.split('-').map(Number);
const dateObj = new Date(year, month - 1, day); // month is 0-indexed in Date constructor

const formattedDate = dateObj.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<article class="changelog-entry" data-components={components.join(',')}>
  <div class="entry-header">
    <div class="entry-meta">
      <time datetime={date}>{formattedDate}</time>
    </div>
    <h2 class="entry-title">{title}</h2>
    <div class="entry-tags">
      {components.map(component => {
        return <span class="entry-tag">{component}</span>;
      })}
    </div>
  </div>
  <div class="entry-content">
    <slot />
  </div>
</article>