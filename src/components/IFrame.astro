---
interface Props {
  src: string;
}
const { src } = Astro.props as Props;
const iframeSrc = `/storybook-static/iframe.html?id=${src}`;
---

<iframe
  id='story'
  title={src}
  src={iframeSrc}
  allow='clipboard-read; clipboard-write'
  width='100%'
  style='border: none; overflow: hidden; height: 100vh;'>
</iframe>

<script>
  window.addEventListener('message', (event) => {
    if (event.data.height) {
      const iframe = document.getElementById('story');
      if (iframe) {
        const iframeDocument =
          iframe.contentDocument || iframe.contentWindow.document;
        iframeDocument.documentElement.style.overflow = 'hidden';
        iframe.style.height = event.data.height + 'px';
      }
    }
  });
</script>
