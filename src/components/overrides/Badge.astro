---
import { Badge as StarlightBadge } from '@astrojs/starlight/components';
import { setBasePath } from '@utils/basePath';

interface Props {
  text: string;
  variant?: 'default' | 'note' | 'danger' | 'success' | 'tip' | 'caution';
  size?: 'small' | 'medium' | 'large';
  href?: string;
  tooltip?: string;
}

const { text, variant = 'default', size = 'medium', href, tooltip } = Astro.props;
const isExternal = href?.toString().startsWith('https://');
const fullHref = href ? (isExternal ? href : setBasePath(href)) : undefined;
---

{href ? (
  <a
    href={fullHref}
    target={isExternal ? '_blank' : '_self'}
    rel={isExternal ? 'noopener noreferrer' : undefined}
    class="sl-badge-link"
    {...(tooltip ? { title: tooltip } : {})}
  >
    <StarlightBadge text={text} variant={variant} size={size} />
  </a>
) : (
  <StarlightBadge text={text} variant={variant} size={size} />
)}
