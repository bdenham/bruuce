---
title: Indexing
description: Boost your Adobe Commerce SEO on Edge Delivery Services! Follow our guidelines on data layers, canonical URLs, redirects, and sitemaps.
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

Optimizing Adobe Commerce storefronts on Edge Delivery Services for search engines requires guidance. The general recommendations provided here are inspired by customers and partners who have built storefront projects on Edge Delivery Services.

The following best practices are designed to help you ensure that your site is indexed correctly by search engines.

### Canonical URLs

- When product detail pages (PDPs) have multiple URLs, set a consistent canonical URL for each product.
- Make sure that canonical URLs do not point to redirects (301).

### Configurable products

For configurable products, ensure that the canonical URL is set to the parent product URL. This is important because Google might index the child product URLs, which can lead to duplicate content issues.

### Folder mapping

When using [folder mapping](https://www.aem.live/developer/folder-mapping) for Commerce pages (PDP, PLP) ensure that the server-side rendered response contains metadata that allows Google to differentiate pages.

Folder-mapped pages (without using [bulk metadata](https://www.aem.live/docs/bulk-metadata)) all look the same and Google might classify them as duplicate and not index them, despite different canonical URLs as Google considers canonical URLs a hint and not an absolute value.

#### URL format of catalog pages

By default, the boilerplate uses [folder mapping](https://www.aem.live/developer/folder-mapping) for product detail pages (PDP) and dedicated pages for product list pages (PLP). If your catalog has a large amount of PLPs, it might make sense to also use folder mapping for PLPs. A low number of PDPs or PLPs could justify creating dedicated pages for each.

The URL format for folder mapped PDPs looks like this:

```plaintext
/products/{urlKey}/{sku}
```

This is to include the SEO relevant `urlKey` parameter and the `SKU` which is needed to perform Catalog Service queries. Feel free to customize the format as needed. You might need to do advanced customization on the CDN.

:::note[Uppercase characters in URLs]
Be aware that Edge Delivery Services does not handle URLs with uppercase letters well. This can cause issues if any of your product SKUs contain uppercase characters.

- URLs generated by Edge Delivery Service will always be lowercase.
- Product detail page URLs with uppercase letters will still work.
  :::

### Multi-store setups

For [multi-store setups](/merchants/multistore) or stores supporting multiple locales:

- Verify a [correct hreflang setup](https://www.aem.live/developer/sitemap#specifying-the-primary-language-manually). You can validate using the [hreflang Tags Testing Tool](https://technicalseo.com/tools/hreflang/)

- Verify that the `Magento-Store-Code` header value defined in your [storefront configuration](/setup/configuration/commerce-configuration/) is part of the URL for every Catalog Service or Live Search request.

  :::note
  This is required because Google caches responses without considering headers. Not adding the store code to the URL might lead to Google indexing the wrong data. You can ensure this by adding a cache-busting query parameter.
  :::

### Cache-busting Query Parameter

The [Commerce boilerplate template](https://github.com/hlxsites/aem-boilerplate-commerce/tree/main) includes a built-in way to prevent stale data from being served. It does this by adding a dynamic cache-busting parameter to Catalog Service requests.

When your configuration headers change, the browser fetches fresh data instead of using cached responses. This helps keep your storefront content up to date.

Here’s how the boilerplate handles it:

1. It collects headers from your [storefront configuration](/setup/configuration/commerce-configuration/)—`public.headers.all.*` and `public.headers.cs.*`
1. It creates a short hash (5 characters by default) based on those headers.
1. It adds the hash to the Catalog Service URL using the format `?cb=<hash>`.
1. When the headers change, it generates a new hash automatically.

This ensures that any change—like a new store code or view code—triggers a fresh fetch and bypasses CDN-cached GET requests to the Catalog Service.

You don’t need to enable or configure anything. The Commerce boilerplate handles everything automatically when:

- The PDP drop-in component initializes.
- Any component sends a request to the Catalog Service.
- Your configuration headers update.

The boilerplate always manages the `cb` parameter for you.

### Redirects

Ensure proper redirects are set up using the redirects sheet or through your [CDN](/setup/configuration/content-delivery-network/).

- Fallbacks for any potential URL changes (for example, product URLs or missing .html suffixes)
- Redirects that are set up in Adobe Commerce

### Sitemaps

- Submit new sitemaps through Google Search Console (Google takes a while to detect new sitemaps).
- If your site is using more than one sitemap, reference all sitemaps in your site's `robots.txt` file.
- Ensure that all sitemaps are valid using the [hreflang Tags Testing Tool](https://technicalseo.com/tools/hreflang/).

:::note
See [sitemaps](https://www.aem.live/developer/sitemap) in the Edge Delivery Services documentation for more information on how to generate sitemaps.
:::

### Other

- You can validate indexing using Google Search Console by inspecting the markup of the crawl to see if all important information were tracked.
- Transactional pages (for example, cart, checkout, and account) should not be indexed.
- Staging or any non-production environments must not be indexed. Once indexed, URLs from a staging environment can reduce traffic to the production environment. It might take a significant amount of time to remove staging URLs from the Google index.
