---
title: Indexing
description: Boost your Adobe Commerce SEO on Edge Delivery Services! Follow our guidelines on data layers, canonical URLs, redirects, and sitemaps.
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

Optimizing Adobe Commerce storefronts on Edge Delivery Services for search engines requires guidance. The general recommendations provided here are inspired by customers and partners who have built storefront projects on Edge Delivery Services.

The following best practices are designed to help you ensure that your site is indexed correctly by search engines.

### Canonical URLs

- When product detail pages (PDPs) have multiple URLs, set a consistent canonical URL for each product.
- Make sure that canonical URLs do not point to redirects (301).

### Configurable products

For configurable products, ensure that the canonical URL is set to the parent product URL. This is important because Google might index the child product URLs, which can lead to duplicate content issues.

### Folder mapping

When using [folder mapping](https://www.aem.live/developer/folder-mapping) for Commerce pages (PDP, PLP) ensure that the server-side rendered response contains metadata that allows Google to differentiate pages.

Folder-mapped pages (without using [bulk metadata](https://www.aem.live/docs/bulk-metadata)) all look the same and Google might classify them as duplicate and not index them, despite different canonical URLs as Google considers canonical URLs a hint and not an absolute value.

#### URL format of catalog pages

By default, the boilerplate uses [folder mapping](https://www.aem.live/developer/folder-mapping) for product detail pages (PDP) and dedicated pages for product list pages (PLP). If your catalog has a large amount of PLPs, it might make sense to also use folder mapping for PLPs. A low number of PDPs or PLPs could justify creating dedicated pages for each.

The URL format for folder mapped PDPs looks like this:

```plaintext
/products/{urlKey}/{sku}
```

This is to include the SEO relevant `urlKey` parameter and the `SKU` which is needed to perform Catalog Service queries. Feel free to customize the format as needed. You might need to do advanced customization on the CDN.

:::note[Uppercase characters in URLs]
Be aware that Edge Delivery Services does not handle URLs with uppercase letters well. This can cause issues if any of your product SKUs contain uppercase characters.

- URLs generated by Edge Delivery Service will always be lowercase.
- Product detail page URLs with uppercase letters will still work.
  :::

### Multi-store setups

For [multi-store setups](/merchants/get-started/multistore) or stores supporting multiple locales:

- Verify a [correct hreflang setup](https://www.aem.live/developer/sitemap#specifying-the-primary-language-manually). You can validate using the [hreflang Tags Testing Tool](https://technicalseo.com/tools/hreflang/)

- Verify that the `Magento-Store-Code` header value defined in your [storefront configuration](/setup/configuration/commerce-configuration/) is part of the URL for every Catalog Service or Live Search request.

  :::note
  This is required because Google caches responses without considering headers. Not adding the store code to the URL might lead to Google indexing the wrong data. You can ensure this by adding a cache-busting query parameter.
  :::

### Cache-busting Query Parameter

The [Commerce boilerplate template](https://github.com/hlxsites/aem-boilerplate-commerce/tree/main) implements a dynamic cache-busting mechanism for the Catalog Service endpoint. This ensures that when configuration headers change, the browser will fetch fresh data instead of using cached responses.

The cache-busting mechanism is handled internally by the boilerplate code:

1. The headers are collected from your [storefront configuration](/setup/configuration/commerce-configuration/) i.e. `public.headers.cs.*`
2. A short hash (8 characters by default) is generated from these headers
3. The hash is automatically appended to the Catalog Service endpoint URL as `?cache-buster=<hash>`
4. The hash updates automatically whenever the headers change

This ensures that any changes to your Catalog Service configuration (like store code, store view code, or other headers) will automatically trigger fresh data fetches.

You don't need to implement anything special to use this feature. The cache-busting is automatically applied when:

- The PDP drop-in component initializes
- Any component makes requests to the Catalog Service endpoint
- The configuration headers change

The system will automatically handle generating and updating the cache-buster parameter as needed.

### Redirects

Ensure proper redirects are set up using the redirects sheet or through your [CDN](/setup/configuration/content-delivery-network/).

- Fallbacks for any potential URL changes (for example, product URLs or missing .html suffixes)
- Redirects that are set up in Adobe Commerce

### Sitemaps

- Submit new sitemaps through Google Search Console (Google takes a while to detect new sitemaps).
- If your site is using more than one sitemap, reference all sitemaps in your site's `robots.txt` file.
- Ensure that all sitemaps are valid using the [hreflang Tags Testing Tool](https://technicalseo.com/tools/hreflang/).

:::note
See [sitemaps](https://www.aem.live/developer/sitemap) in the Edge Delivery Services documentation for more information on how to generate sitemaps.
:::

### Other

- You can validate indexing using Google Search Console by inspecting the markup of the crawl to see if all important information were tracked.
- Transactional pages (for example, cart, checkout, and account) should not be indexed.
- Staging or any non-production environments must not be indexed. Once indexed, URLs from a staging environment can reduce traffic to the production environment. It might take a significant amount of time to remove staging URLs from the Google index.
