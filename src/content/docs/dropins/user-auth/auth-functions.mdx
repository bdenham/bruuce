---
title: User Auth Functions
description: Learn about the API functions provided by the Product Details dropin.
---


## confirmEmail

The `confirmEmail` function uses the supplied `customerEmail` and `customerConfirmationKey` parameters to complete the customer activation process. Adobe Commerce sends the confirmation key to the customer when they request to create an account. The function calls the [`confirmEmail` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/confirm-email/).

confirmEmail({
  customerEmail: "abc@example.com",
  customerConfirmationKey: "1234567890",
});

### Syntax

```ts
import { confirmEmail } from '@/auth/api/confirmEmail';

confirmEmail(
  {
    customerEmail: string,
    customerConfirmationKey: string,
  },
);
```

### Returns

`confirmEmailProps`

### Usage

```ts
confirmEmail({
  customerEmail: "abc@example.com",
  customerConfirmationKey: "1234567890",
});
```

## createCustomer

The `createCustomer` function creates a customer account based on the data supplied in the `forms` parameter. By default, the function uses the [`createCustomer` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-customer/). If the `apiVersion2` parameter is set to `true`, the function uses the [`createCustomerV2` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/). 

### Syntax

```ts
import { createCustomer } from '@/auth/api/createCustomer';

createCustomer(forms: Customer; apiVersion2: boolean);

```
### Returns

`CreateCustomerDataResponse`

### Usage

```ts
createCustomer( forms:{
  allow_remote_shopping_assistance: true,
  date_of_birth: "1990-01-01",
  email: "john.doe@example.com",
  firstname: "John",
  is_subscribed: true,
  lastname: "Doe",
  middlename: "",
  password: "Password123",
  prefix: "",
  suffix: "",
  taxvat: "",
}, apiVersion2: true);
```

## createCustomerAddress

The `createCustomerAddress` function defines a new customer address. The customer can subseqently designate the address for billing or shipping orders. The function calls the [`createCustomerAddress` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-customer-address/).

### Syntax

```ts
import { createCustomerAddress } from '@/auth/api/createCustomerAddress';

createCustomerAddress (address: AddressFormProps);
```

### Returns

`CreateCustomerAddressResponse`

### Usage

```ts
createCustomerAddress(address: {
  "city": "Phoenix",
  "country_code": "US",
  "default_billing": true,
  "default_shipping": false,
  "firstname": "Bob",
  "lastname": "Loblaw",
  "postcode": "77777",
  "region": {
    "region": "Arizona",
    "region_code": "AZ",
  },
  "street": ["123 Main St"],
  "telephone": "555 555-5555",
});
```

## getAttributesForm

The `getAttributesForm` function uses the `attributesForm` query to retrieve EAV attributes associated with customer and customer address frontend forms. The function calls the [`attributesForm` query](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-form/).

### Syntax

```ts
import { getAttributesForm } from '@/auth/api/getAttributesForm';

getAttributesForm(formCode: string);
```

### Returns

`AttributesFormModel`

### Usage

```ts
getAttributesForm(formCode: "customer_account_create");
```

## getCustomerData

The `getCustomerData` function retrieves customer data based on the required `auth_dropin_user_token` parameter. The function calls the [`customer` query](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/customer/).

### Syntax

```ts
import { getCustomerData } from '@/auth/api/getCustomerData';

getCustomerData(auth_dropin_user_token: "abcdefghi12345");
```

### Returns

`CustomerDataModel`

## getCustomerToken

The `getCustomerToken` function handles the sign-in operation. It requires `userName` and `password` parameters and performs the following actions under the hood:

1. Retrieves the customer token.

1. Fetches customer data using the token.

1. Sets the `auth_dropin_firstname` and `auth_dropin_user_token` cookies.

1. Publishes an ACDL event.

1. Emits an “authenticated” event.

You can use the `getCustomerToken` function to build a custom authentication flow that remains fully integrated with other drop-ins.

The function calls the [`generateCustomerToken` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/generate-token/).


### Syntax

```ts
import { getCustomerToken } from '@/auth/api/getCustomerToken';

getCustomerToken(
  {
    email: string,
    password: string,
    handleSetInLineAlertProps: (value?: inLineAlertInterface) => void;
    translations: Record<string, string>;
    onErrorCallback?: (value?: unknown) => void;
  },
);
```

### Returns

`getCustomerTokenProps`

### Usage

```ts
getCustomerToken(email: "abc@example.com", password: "MyBadPassword");
```

## getStoreConfig

The `getStoreConfig` function uses the [`storeConfig` query](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) to retrieve store configuration data.

### Syntax

```ts
import { getStoreConfig } from '@/auth/api/getStoreConfig';

getStoreConfig();
```

### Returns

`StoreConfigModel`

## requestPasswordResetEmail

The `requestPasswordResetEmail` function  initiate the process to reset a customer's password. The function calls the [`requestPasswordResetEmail` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/request-password-reset-email/).


### Syntax

```ts
import { requestPasswordResetEmail } from '@/auth/api/requestPasswordResetEmail';

requestPasswordResetEmail(email: string);
```

### Returns

`PasswordResetEmailModel`

### Usage

```ts
requestPasswordResetEmail(email: "abc@example.com");
```

## resendConfirmationEmail

The `resendConfirmationEmail` function resends the email confirmation to the customer using the supplied `email` parameter. The function calls the `resendConfirmationEmail` mutation, which is included in the Storefront Compatability Package.

### Syntax

```ts
import { resendConfirmationEmail } from '@/auth/api/resendConfirmationEmail';

resendConfirmationEmail(customerEmail:string);
```

### Returns

`resendConfirmationEmailResponse`

### Usage

```ts
resendConfirmationEmail(customerEmail:"abc@example.com");
```

## resetPassword

The `resetPassword` function resets a customer's password using the supplied `email`, `resetPasswordToken`, and `newPassword` parameters. The function calls the [`resetPassword` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/reset-password/).


### Syntax

```ts
import { resetPassword } from '@/auth/api/resetPassword';

resetPassword (email: string, resetPasswordToken: string, newPassword: string);
```

### Returns

`ResetPasswordModel`

### Usage

```ts
resetPassword(
    email: "abc@example.com", 
    resetPasswordToken: "gh80pkjGdsPyiXc0sUUXswX1uGN7crUr", 
    newPassword: "ThisNewPasswordIsSomewhatBetter");
```

## revokeCustomerToken

The `revokeCustomerToken` function revokes the customer's token and clears cookie. It then publishes an ACDL event and emits an "authenticated" event.

This API can also be used to build a custom sign-out flow that stays fully integrated with other drop-ins.

The function calls the [`revokeCustomerToken` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/revoke-token/).


### Syntax

```ts
import { revokeCustomerToken } from '@/auth/api/revokeCustomerToken';

revokeCustomerToken();
```

### Returns

`RevokeCustomerTokenModel`
