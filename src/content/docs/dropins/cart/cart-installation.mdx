---
title: Cart Installation
description: Learn how to install the Cart drop-in into your site.
sidebar:
  # label: Cart Installation
  order: 2
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import Tasks from '@components/Tasks.astro';
import Task from '@components/Task.astro';
import Callouts from '@components/Callouts.astro';
import Diagram from '@components/Diagram.astro';
import Vocabulary from '@components/Vocabulary.astro';

Our drop-ins are designed for the browser's JavaScript runtime without the need for a bundler. You can also install and execute drop-ins in a build-time environment with bundlers like Vite. The installation steps for both runtime and build-time environments are the same after the initial drop-in package imports.

## Big picture

Use the following steps to install the Cart drop-in:

<Diagram>![PDP Installation](@images/pdp/pdp-installation.svg)</Diagram>

## Step-by-step

Use the following steps to install the Cart drop-in on your site.

:::note[Edge Delivery Service]
These steps are specific for EDS projects, and may not necessarily be the same for other frameworks such as a static HTML or React framework.
:::

<Tasks>

<Task>

### Install the packages

Use a CDN or NPM (recommended for performance) to install the drop-in tools (`@dropins/tools`) and Cart (`@dropins/storefront-cart`) packages.

<Tabs>
  <TabItem label="NPM" icon="seti:npm">

    ```bash frame="none"
    npm install @dropins/tools @dropins/storefront-cart
    ```

  </TabItem>
  <TabItem label="CDN" icon="external">

    ```html title="index.html" del={"Replace with actual URLs":5-7}
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Your Storefront</title>

      <script src="https://cdn.jsdelivr.net/npm/@dropins/tools@latest"></script>
      <script src="https://cdn.jsdelivr.net/npm/@dropins/storefront-cart@latest"></script>
    </head>
    ```

  </TabItem>
</Tabs>

:::note[Install @dropins/tools]
All drop-ins require the `@dropins/tools` package. This package contains the libraries that drop-ins need to initialize and communicate, including `fetch-graphql`, `event-bus`, and `initializer` utilities.
:::

</Task>

<Task>
### Map the packages

In the `<head>` tag of your `index.html` or `head.html` file, use an `importmap` pointed to the `node_modules` directory, a **custom local directory**, or **CDN** (for run-time environments).

<Tabs>
<TabItem label="node_modules" icon="seti:npm">
    This example shows an `importmap` added to a `head.html` The `importmap` points both packages to the local `node_modules` directory that contains your installed drop-in files from the drop-in tools (@dropins/tools) and the Cart drop-in (@dropins/storefront-cart):
  
  ```html title="head.html"
  <script type="importmap">
    {
      "imports": {
        "@dropins/tools/": "/node_modules/@dropins/tools/",
        "@dropins/storefront-cart/": "/node_modules/@dropins/storefront-cart/",
      }
    }
  </script>
  <script src="/scripts/scripts.js" type="module"></script>
    ```
  </TabItem>
    <TabItem label="custom" icon="seti:folder">
    This example shows an `importmap` added to a `head.html` The `importmap` points both packages to local directories that contain all the optimized/minified files from the drop-in tools (@dropins/tools) and the Cart drop-in (@dropins/storefront-cart):

    ```html title="head.html"
    <script type="importmap">
      {
        "imports": {
          "@dropins/tools/": "/scripts/__dropins__/tools/",
          "@dropins/storefront-cart/": "/scripts/__dropins__/storefront-cart/",
        }
      }
    </script>
    <script src="/scripts/scripts.js" type="module"></script>
    ```

  </TabItem>
  <TabItem label="CDN" icon="external">
    This example shows an `importmap` pointing both packages to a CDN for the drop-in tools (@dropins/tools) and the Cart drop-in (@dropins/storefront-cart):

    ```html title="index.html" {"Replace CDN URLs with correct URLs":5-7} del='https://cdn.jsdelivr.net/npm/'
    <head>
      <script type="importmap">
        {
          "imports": {

            "@dropins/tools/": "https://cdn.jsdelivr.net/npm/@dropins/tools@latest",
            "@dropins/storefront-cart/": "https://cdn.jsdelivr.net/npm/@dropins/storefront-cart@latest",
          }
        }
      </script>
    </head>
    ```

  </TabItem>

</Tabs>

With the `importmap` defined for both runtime and build-time environments, you can now **import the required files** from these packages into your Cart drop-in JavaScript file as described in the next step.

</Task>

<Task>
### Import the required files

Import the required files from the drop-ins tools (`@dropins/tools/fetch-graphql.js'`, `@dropin/tools/initializers.js`) and the Cart drop-in (`@dropins/storefront-cart`) into a JavaScript file for your Cart drop-in. The example here shows the imports added to a `cart.js` file. These imports constitute the minimum imports you need to create a fully functioning Cart drop-in for your site:

```js title="cart.js"
// GraphQL Client
import * as mesh from '@dropins/tools/fetch-graphql.js';

// Drop-in Tools
import { initializers } from '@dropins/tools/initializer.js';

// Drop-in Functions
import * as pkg from '@dropins/storefront-cart/api.js';

// Drop-in Provider
import { render as provider } from '@dropins/storefront-cart/render.js';

// Drop-in Containers
import Cart from '@dropins/storefront-cart/containers/Cart.js';
import MiniCart from '@dropins/storefront-cart/containers/MiniCart.js';
```

<Vocabulary>

### GraphQL Client

Enables the ability to set and get endpoints and headers, as well as fetches data and configurations.

### Drop-in Tools

The Initializer is responsible for setting up event listeners and initializing a module with the given configuration.

### Drop-in Functions

Enables Cart API functions: addProductsToCart, createEmptyCart, getCartData... and more.

### Drop-in Provider

Renders the Cart UI.

### Drop-in Containers

Structural elements that are responsible for managing and displaying the Cart and Mini-cart.

</Vocabulary>

</Task>

<Task>
### Connect to the endpoint

Connect your Cart drop-in to the API Mesh endpoint and set the required headers as shown in the example below. Replace the endpoint URL and header placeholder values with the actual values from your Commerce backend services:

```js title="cart.js"
// Set endpoint configuration
mesh.setEndpoint('https://<graphql-service-endpoint>/graphql');
```

#### Request headers

The Cart drop-in does not need additional headers set for basic installation. But if you're looking to enable features for your drop-in, the GraphQL request accepts additional headers. The below example shows how you could set the `Commerce-Auth` header with the customer token for the Authorization header, and how to set the store code header for store specific features. Replace the header values with the actual values from your Commerce backend services:

```js title="cart.js"
// Set the customer token. This method is specific to @dropins/storefront-cart package.
pkg.setFetchGraphQlHeader('commerce-auth', '<token>');

// Set store code header. This method is specific to the @dropins/tools package.
mesh.setFetchGraphQlHeader('store', '<default>');
```

:::note[Authentication]
Note that this setting is specific for GraphQL Mesh, so refer to the [Commerce GraphQL Service](https://developer.adobe.com/commerce/webapi/graphql/usage/headers/#request-headers) for direct connections. Visit the [User Authentication](/dropins/user-auth/) drop-in for instructions on setting up Authentication features.
:::

</Task>

<Task>
### Register and load the drop-in

The code below shows how to register the Cart drop-in, load it (mount), and enable the logger for debugging purposes. You can add these functions within a `<script>` tag in your Cart HTML page as shown here:

```html title="index.html" ins={"1":5} ins={"2":8}
<script type="module">
  // more code above...

  // Register and load the Cart drop-in
  initializers.register(pkg.initialize);

  // Mount Initializers (must be called after all initializers are registered)
  window.addEventListener('load', initializers.mount);
</script>
```

<Callouts square color="var(--sl-color-green)">

1. This function registers the Cart drop-in to be loaded on the page by the `initializers.mount` function.
1. This event handler triggers the initializers.mount function to load the Cart drop-in after the page has loaded.

</Callouts>

</Task>

<Task>
### Render the drop-in

Render the Cart drop-in on the page. The example below provides the minimal configuration options required to render the default Cart drop-in, along with an example to render Mini-Cart.

```js title="cart.js"
// Render Cart
provider.render(Cart, {
  routeProduct: (item) => {
    return `${item.url.categories.join('/')}/${item.url.urlKey}`;
  },
  routeEmptyCartCTA: () => 'your-empty-cart-element',
  routeCheckout: () => 'your-checkout-element',
})(document.getElementById('your-cart-element'));

// Render MiniCart
provider.render(MiniCart, {
  routeProduct: (item) => {
    return `${item.url.categories.join('/')}/${item.url.urlKey}`;
  },
  routeEmptyCartCTA: () => 'your-empty-cart-element',
  routeCart: () => 'your-cart-element',
  routeCheckout: () => 'your-checkout-element',
})(document.getElementById('your-mini-cart-element'));
```

Test the Cart drop-in by viewing your Cart page in a browser, or running your local dev or build server. If you see the Cart drop-in rendered in the browser, congrats!, you have a successful installation. If not, check the console for any errors and verify that you have followed all the steps correctly.

</Task>

</Tasks>

## Summary

The installation of all drop-ins follow the same pattern demonstrated by installing the Cart drop-in: Install, Map, Import, Connect, Register, and Render. We like to call the process `iMICRR` for short, pronounced `eye-mike-er`. Actually, we don't call it that, but if it helps...Enjoy!
