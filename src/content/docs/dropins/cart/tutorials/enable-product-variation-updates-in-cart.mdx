---
title: Configuring Product Variation Updates in the Cart
description: Learn how to enable or disable the product variation update feature in the cart and mini cart through AEM block configuration.
---

import Aside from '@components/Aside.astro';
import Callouts from '@components/Callouts.astro';
import { Tabs, TabItem, Steps } from '@astrojs/starlight/components';
import Tasks from '@components/Tasks.astro';
import Task from '@components/Task.astro';

This tutorial shows you how to configure the Edit feature for product variations in both the cart and mini-cart. The **Edit** button allows shoppers to update product variations (like size or color) directly from the cart pages.

The implementation is already available in the codebase. This tutorial focuses on how to *enable* or *disable* this feature through the AEM block configuration.

<Aside type="note">
  This feature works for configurable products in the cart. When enabled, an **Edit** button appears for each applicable item, allowing shoppers to modify their selected options without having to navigate away from the cart.
</Aside>

## How it Works

The **Edit** button feature is controlled by a configuration flag (`enable-updating-product`) that can be set on both the `commerce-cart` and `commerce-mini-cart` blocks in AEM. 

<Tabs>
<TabItem label="Cart">
In the `commerce-cart.js` implementation, the code checks for this flag and conditionally renders an **Edit** button in the `Footer` slot for configurable products:

```javascript
// First, the configuration is read from the block with a default of 'false'
const {
  'hide-heading': hideHeading = 'false',
  'max-items': maxItems,
  // ... other config properties ...
  'checkout-url': checkoutURL = '',
  'enable-updating-product': enableUpdatingProduct = 'false',
} = readBlockConfig(block);

// Later in the code, inside the Footer slot
if (ctx.item?.itemType === 'ConfigurableCartItem' && enableUpdatingProduct === 'true') {
  // Code that creates and adds the Edit button to the Footer slot
  // ...
}
```

When a shopper clicks the **Edit** button, they're redirected to the product page with their current selections pre-populated, allowing them to modify their options.
</TabItem>

<TabItem label="Mini Cart">
Similarly, in the `commerce-mini-cart.js` implementation, the code uses the same configuration flag to determine whether to display an **Edit** button for each configurable product in the mini-cart, but implements it in the `Thumbnail` slot:

```javascript
// First, the configuration is read from the block with a default of 'false'
const {
  'start-shopping-url': startShoppingURL = '',
  'cart-url': cartURL = '',
  'checkout-url': checkoutURL = '',
  'enable-updating-product': enableUpdatingProduct = 'false',
} = readBlockConfig(block);

// Later in the code, inside the Thumbnail slot
if (ctx.item?.itemType === 'ConfigurableCartItem' && enableUpdatingProduct === 'true') {
  // Code that creates and adds the Edit button to the Thumbnail slot
  // ...
}
```

When enabled, this provides a convenient way for shoppers to update their product options by redirecting them to the product detail page with their current selections pre-populated.
</TabItem>
</Tabs>

## Configuration Steps

To modify this feature's configuration, follow these steps:

<Tasks>
<Task>
### Configure the Cart Summary Block

The `enable-updating-product` property is *already set to `true` by default* in the cart block. If you want to disable it:

1. In your AEM authoring environment, navigate to the page containing your `commerce-cart` block.
2. Select the `commerce-cart` block and open its properties dialog.
3. Locate the existing property with the *Key* `Enable Updating Product`.
4. Change its *Value* to `false` to disable the feature.
5. Save the changes.
6. Preview the changes by clicking the **Preview** button.
7. Publish the changes by clicking the **Publish** button.

<Aside type="tip">
  The configuration is already provided in the content block, so you don't need to add a new property - just modify the existing one as needed.
</Aside>
</Task>

<Task>
### Configure the Mini Cart Block

The `enable-updating-product` property is *already set to `false` by default* in the mini-cart block. If you want to enable it:

1. In your AEM authoring environment, navigate to the page or header that contains your `commerce-mini-cart` block.
2. Select the `commerce-mini-cart` block and open its properties dialog.
3. Locate the existing property with the *Key* `Enable Updating Product`.
4. Change its *Value* to `true` to enable the feature.
5. Save the changes.
6. Preview the changes by clicking the **Preview** button.
7. Publish the changes by clicking the **Publish** button.
</Task>

<Task>
### Example Block Configurations

Here's how your block configuration should look like:

**Cart Block (Enabled by Default):**

| Key                       | Value |
| :------------------------ | :---- |
| `Enable Updating Product` | `true`|
| `Checkout URL`            | `/checkout` |  *(Example of another common property)*

**Mini Cart Block (Disabled by Default):**

| Key                       | Value |
| :------------------------ | :---- |
| `Enable Updating Product` | `false`|
| `Checkout URL`            | `/checkout` | *(Example of another common property)*

<Aside type="caution">
  The property appears as `Enable Updating Product` (with spaces) in the AEM properties dialog, but is converted to kebab-case (`enable-updating-product`) when processed by the code.
</Aside>
</Task>
</Tasks>

## Testing the Configuration

After configuring the feature, you should test it to ensure it's working as expected:

1. Add a configurable product to your cart.
2. View your cart page:
   - If enabled, you should see an **Edit** button for each configurable product.
   - If disabled, no **Edit** button should appear.
3. Open the mini cart:
   - If enabled, you should see an `Edit` option for configurable products.
   - If disabled, no `Edit` option should be visible.

## Feature Behavior

When the **Edit** button is clicked, the shopper is redirected to the product page with:
- Their previously selected options pre-selected
- The current quantity maintained

This allows them to modify their selection and update the existing cart item rather than adding a new one.

With this simple configuration, you can provide your shoppers with a more convenient shopping experience by allowing them to modify product variations directly from the cart. 