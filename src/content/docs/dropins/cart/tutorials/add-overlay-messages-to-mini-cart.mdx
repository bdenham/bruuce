---
title: Add overlay messages to mini cart
description: Learn how to add overlay feedback messages when products are added or updated in the mini cart.
sidebar:
  order: 5
---

import Aside from '@components/Aside.astro';

This tutorial shows you how to add overlay feedback messages that appear in the mini cart when products are added or updated to the cart. These messages provide visual feedback to users about their cart actions.

## Overview

The mini cart can display temporary overlay messages when products are added or updated to the cart. These messages appear at the top center of the mini cart with a semi-transparent background for a brief period (3 seconds by default) and then automatically disappear, providing immediate feedback to users about their cart actions.

## Prerequisites

Before implementing overlay messages, ensure you have:

- Access to SharePoint or Google Docs for managing message translations through placeholders
- Understanding of the design system tokens used in the Commerce boilerplate template (see [Design Tokens](/dropins/all/branding))
- The `commerce-mini-cart.css` file in your `blocks/commerce-mini-cart/` directory

<Aside type="note">
  The CSS styles use design tokens (prefixed with `--`) to maintain consistency with the design
  system. These tokens are defined in the boilerplate's design system.
</Aside>

## Implementation

To add overlay messages to your mini cart, follow these steps:

1. First, get translations for message texts using placeholders:

```javascript
// Get translations for custom messages from SharePoint or Google Docs
const placeholders = await fetchPlaceholders();

// Access the message texts from the Cart.MiniCart.Message namespace
const MESSAGES = {
  ADDED: placeholders?.Cart?.MiniCart?.Message?.added,
  UPDATED: placeholders?.Cart?.MiniCart?.Message?.updated,
};
```

2. Create the overlay and message containers:

```javascript
// Create overlay container
const overlay = document.createElement('div');
overlay.className = 'commerce-mini-cart__overlay';

// Create message container
const messageContainer = document.createElement('div');
messageContainer.className = 'commerce-mini-cart__message';

overlay.appendChild(messageContainer);
```

3. Create a function to show and hide messages:

```javascript
const showMessage = (message) => {
  messageContainer.textContent = message;
  overlay.classList.add('commerce-mini-cart__overlay--visible');
  setTimeout(() => {
    overlay.classList.remove('commerce-mini-cart__overlay--visible');
  }, 3000);
};
```

4. Add event listeners for cart updates:

```javascript
import { events } from '@dropins/tools/event-bus.js';

events.on('cart/product/added', () => showMessage(MESSAGES.ADDED), {
  eager: true,
});
events.on('cart/product/updated', () => showMessage(MESSAGES.UPDATED), {
  eager: true,
});
```

5. Add the overlay to your mini cart block:

```javascript
block.appendChild(overlay);
```

6. Add the following styles to your `commerce-mini-cart.css` file:

```css
.commerce-mini-cart__overlay {
  background-color: rgb(0 0 0 / 50%);
  display: none;
  position: absolute;
  inset: 0;
  z-index: 1000;
  border-radius: var(--shape-border-radius-1);
}

.commerce-mini-cart__message {
  background-color: var(--color-positive-200);
  border-radius: var(--shape-border-radius-1);
  padding: var(--spacing-small);
  position: absolute;
  top: var(--spacing-medium);
  left: 50%;
  transform: translateX(-50%);
  font: var(--type-body-2-default-font);
  letter-spacing: var(--type-body-2-default-letter-spacing);
  box-shadow: var(--shape-shadow-3);
  width: 90%;
  max-width: 400px;
  text-align: center;
}

.commerce-mini-cart__overlay--visible {
  display: block;
}
```

## Customization

You can customize the appearance and behavior of the overlay messages by modifying the following:

- Message text: Update the translations in SharePoint or Google Docs under the `Cart.MiniCart.Message` namespace
- Message styling: Modify the CSS classes in `commerce-mini-cart.css`. The styles use design tokens (prefixed with `--`) to maintain consistency with the design system. You can customize:
  - Background opacity using the alpha value in the overlay's `background-color` (default is 50%)
  - Message position using the `top`, `left`, and `transform` properties
  - Colors, spacing, shadows, and other visual properties using design tokens
- Display duration: Change the timeout value in the `showMessage` function (default is 3000ms)

## Events

The overlay messages respond to two cart events:

- `cart/product/added`: Triggered when products are added to the cart
- `cart/product/updated`: Triggered when products in the cart are updated

## Complete Example

Here's a complete example of implementing overlay messages in your `commerce-mini-cart.js` block file:

```javascript
import { render as provider } from '@dropins/storefront-cart/render.js';
import MiniCart from '@dropins/storefront-cart/containers/MiniCart.js';
import { events } from '@dropins/tools/event-bus.js';

// Initializers
import '../../scripts/initializers/cart.js';

import { readBlockConfig, fetchPlaceholders } from '../../scripts/aem.js';
import { rootLink } from '../../scripts/scripts.js';

export default async function decorate(block) {
  const {
    'start-shopping-url': startShoppingURL = '',
    'cart-url': cartURL = '',
    'checkout-url': checkoutURL = '',
  } = readBlockConfig(block);

  // Get translations for custom messages
  const placeholders = await fetchPlaceholders();

  const MESSAGES = {
    ADDED: placeholders?.Cart?.MiniCart?.Message?.added,
    UPDATED: placeholders?.Cart?.MiniCart?.Message?.updated,
  };

  block.innerHTML = '';

  // Render MiniCart first
  await provider.render(MiniCart, {
    routeEmptyCartCTA: startShoppingURL ? () => rootLink(startShoppingURL) : undefined,
    routeCart: cartURL ? () => rootLink(cartURL) : undefined,
    routeCheckout: checkoutURL ? () => rootLink(checkoutURL) : undefined,
    routeProduct: (product) => rootLink(`/products/${product.url.urlKey}/${product.topLevelSku}`),
  })(block);

  // Create overlay container
  const overlay = document.createElement('div');
  overlay.className = 'commerce-mini-cart__overlay';

  // Create message container
  const messageContainer = document.createElement('div');
  messageContainer.className = 'commerce-mini-cart__message';

  overlay.appendChild(messageContainer);
  block.appendChild(overlay);

  const showMessage = (message) => {
    messageContainer.textContent = message;
    overlay.classList.add('commerce-mini-cart__overlay--visible');
    setTimeout(() => {
      overlay.classList.remove('commerce-mini-cart__overlay--visible');
    }, 3000);
  };

  // Add event listeners for cart updates
  events.on('cart/product/added', () => showMessage(MESSAGES.ADDED), {
    eager: true,
  });
  events.on('cart/product/updated', () => showMessage(MESSAGES.UPDATED), {
    eager: true,
  });

  return block;
}
```

And here's the accompanying CSS file (`commerce-mini-cart.css`):

```css
.commerce-mini-cart__overlay {
  background-color: rgb(0 0 0 / 50%);
  display: none;
  position: absolute;
  inset: 0;
  z-index: 1000;
  border-radius: var(--shape-border-radius-1);
}

.commerce-mini-cart__message {
  background-color: var(--color-positive-200);
  border-radius: var(--shape-border-radius-1);
  padding: var(--spacing-small);
  position: absolute;
  top: var(--spacing-medium);
  left: 50%;
  transform: translateX(-50%);
  font: var(--type-body-2-default-font);
  letter-spacing: var(--type-body-2-default-letter-spacing);
  box-shadow: var(--shape-shadow-3);
  width: 90%;
  max-width: 400px;
  text-align: center;
}

.commerce-mini-cart__overlay--visible {
  display: block;
}
```
