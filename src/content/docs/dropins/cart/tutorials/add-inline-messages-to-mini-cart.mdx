---
title: Add inline messages to mini cart
description: Learn how to add inline feedback messages when products are added or updated in the mini cart.
sidebar:
  order: 4
---

import Aside from '@components/Aside.astro';

This tutorial shows you how to add inline feedback messages that appear in the mini cart when products are added or updated to the cart. These messages provide visual feedback to users about their cart actions.

## Overview

The mini cart can display temporary inline messages when products are added or updated to the cart. These messages appear at the top of the mini cart for a brief period (3 seconds by default) and then automatically disappear, providing immediate feedback to users about their cart actions.

## Implementation

To add inline messages to your mini cart, follow these steps:

1. First, create constants for your message texts:

```javascript
const MESSAGES = {
  ADDED: 'Product(s) added to your cart',
  UPDATED: 'Your cart has been updated',
};
```

2. Create the message container and shadow wrapper:

```javascript
// Create a container for the update message
const updateMessage = document.createElement('div');
updateMessage.className = 'cart-update-message';
updateMessage.style.display = 'none';
updateMessage.style.fontSize = '1.4rem';
updateMessage.style.lineHeight = '2rem';
updateMessage.style.letterSpacing = '0.04em';

// Create shadow wrapper
const shadowWrapper = document.createElement('div');
shadowWrapper.style.backgroundColor = '#EFF5EF';
shadowWrapper.style.borderRadius = '5px';
shadowWrapper.style.padding = '8px';
shadowWrapper.style.display = 'none';
shadowWrapper.style.marginBottom = '16px';
shadowWrapper.appendChild(updateMessage);
```

3. Create a function to show and hide messages:

```javascript
const showMessage = (message) => {
  updateMessage.textContent = message;
  updateMessage.style.display = 'block';
  shadowWrapper.style.display = 'block';
  setTimeout(() => {
    updateMessage.style.display = 'none';
    shadowWrapper.style.display = 'none';
  }, 3000);
};
```

4. Add event listeners for cart updates:

```javascript
import { events } from '@dropins/tools/event-bus.js';

events.on('cart/product/added', () => showMessage(MESSAGES.ADDED), {
  eager: true,
});
events.on('cart/product/updated', () => showMessage(MESSAGES.UPDATED), {
  eager: true,
});
```

5. Add the message container to your mini cart block:

```javascript
// Find the products container and add the message div at the top
const productsContainer = block.querySelector('.cart-mini-cart__products');
if (productsContainer) {
  productsContainer.insertBefore(shadowWrapper, productsContainer.firstChild);
} else {
  console.info('Products container not found, appending message to block');
  block.appendChild(shadowWrapper);
}
```

## Customization

You can customize the appearance and behavior of the inline messages by modifying the following:

- Message text: Update the `MESSAGES` object to change the text displayed for different actions
- Message styling: Modify the `style` properties of the `updateMessage` element to change its appearance
- Shadow wrapper styling: Modify the `style` properties of the `shadowWrapper` element to change its appearance
- Message position: Change where the message appears in the mini cart by modifying the insertion point in the DOM
- Display duration: Change the timeout value in the `showMessage` function (default is 3000ms)

## Events

The inline messages respond to two cart events:

- `cart/product/added`: Triggered when products are added to the cart
- `cart/product/updated`: Triggered when products in the cart are updated

## Complete Example

Here's a complete example of implementing inline messages in your mini cart block:

```javascript
import { render as provider } from '@dropins/storefront-cart/render.js';
import MiniCart from '@dropins/storefront-cart/containers/MiniCart.js';
import { events } from '@dropins/tools/event-bus.js';

// Initializers
import '../../scripts/initializers/cart.js';

import { readBlockConfig } from '../../scripts/aem.js';
import { rootLink } from '../../scripts/scripts.js';

const MESSAGES = {
  ADDED: 'Product(s) added to your cart',
  UPDATED: 'Your cart has been updated',
};

export default async function decorate(block) {
  const {
    'start-shopping-url': startShoppingURL = '',
    'cart-url': cartURL = '',
    'checkout-url': checkoutURL = '',
  } = readBlockConfig(block);

  // Create a container for the update message
  const updateMessage = document.createElement('div');
  updateMessage.className = 'cart-update-message';
  updateMessage.style.display = 'none';
  updateMessage.style.fontSize = '1.4rem';
  updateMessage.style.lineHeight = '2rem';
  updateMessage.style.letterSpacing = '0.04em';

  // Create shadow wrapper
  const shadowWrapper = document.createElement('div');
  shadowWrapper.style.backgroundColor = '#EFF5EF';
  shadowWrapper.style.borderRadius = '5px';
  shadowWrapper.style.padding = '8px';
  shadowWrapper.style.display = 'none';
  shadowWrapper.style.marginBottom = '16px';
  shadowWrapper.appendChild(updateMessage);

  const showMessage = (message) => {
    updateMessage.textContent = message;
    updateMessage.style.display = 'block';
    shadowWrapper.style.display = 'block';
    setTimeout(() => {
      updateMessage.style.display = 'none';
      shadowWrapper.style.display = 'none';
    }, 3000);
  };

  // Add event listeners for cart updates
  events.on('cart/product/added', () => showMessage(MESSAGES.ADDED), {
    eager: true,
  });
  events.on('cart/product/updated', () => showMessage(MESSAGES.UPDATED), {
    eager: true,
  });

  block.innerHTML = '';

  // Render MiniCart first
  await provider.render(MiniCart, {
    routeEmptyCartCTA: startShoppingURL ? () => rootLink(startShoppingURL) : undefined,
    routeCart: cartURL ? () => rootLink(cartURL) : undefined,
    routeCheckout: checkoutURL ? () => rootLink(checkoutURL) : undefined,
    routeProduct: (product) => rootLink(`/products/${product.url.urlKey}/${product.topLevelSku}`),
  })(block);

  // Find the products container and add the message div at the top
  const productsContainer = block.querySelector('.cart-mini-cart__products');
  if (productsContainer) {
    productsContainer.insertBefore(shadowWrapper, productsContainer.firstChild);
  } else {
    console.info('Products container not found, appending message to block');
    block.appendChild(shadowWrapper);
  }

  return block;
}
```
