---
title: Product Recommendations Installation
description: Learn how to install the product recommendations drop-in component into your site.
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Badge } from '@astrojs/starlight/components';
import Callouts from '@components/Callouts.astro';
import Tasks from '@components/Tasks.astro';
import Task from '@components/Task.astro';

This guide will help you install and configure the product recommendations drop-in component in your storefront.

## Prerequisites

Before you begin, ensure you have:

- Adobe Commerce instance with Product Recommendations enabled
- Access to your store's GraphQL endpoint
- Required API keys and credentials
- Node.js and npm installed on your development environment

## Step-by-step

Use the following steps to install the product recommendations component:

:::note[Edge Delivery Service]
These steps are specific for Edge Delivery Services projects, and may not necessarily be the same for other frameworks such as a static HTML or React framework.
:::

<Tasks>

<Task>

### Install the packages

Use a CDN or NPM (recommended for performance) to install the drop-in component tools (`@dropins/tools`) and product recommendations (`@dropins/storefront-recommendations`) packages.

<Tabs>
  <TabItem label="NPM" icon="seti:npm">

    ```bash frame="none"
    npm install @dropins/tools @dropins/storefront-recommendations
    ```

  </TabItem>
  <TabItem label="CDN" icon="external">

    ```html title="index.html" del={"Replace with actual URLs":5-7}
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Your Storefront</title>

      <script src="https://cdn.jsdelivr.net/npm/@dropins/tools@latest"></script>
      <script src="https://cdn.jsdelivr.net/npm/@dropins/storefront-recommendations@latest"></script>
    </head>
    ```

  </TabItem>
</Tabs>

:::note[Install @dropins/tools]
All drop-in components require the `@dropins/tools` package. This package contains the libraries that drop-in components need to initialize and communicate, including `fetch-graphql`, `event-bus`, and `initializer` utilities.
:::

</Task>

<Task>
### Map the packages

In the `<head>` tag of your `index.html` or `head.html` file, use an `importmap` pointed to the `node_modules` directory, a **custom local directory**, or **CDN** (for run-time environments).

<Tabs>
<TabItem label="node_modules" icon="seti:npm">
    This example shows an `importmap` added to a `head.html` The `importmap` points both packages to the local `node_modules` directory that contains your installed drop-in component files from the drop-in component tools (@dropins/tools) and the product recommendations (@dropins/storefront-recommendations):

  ```html title="head.html"
  <script type="importmap">
    {
      "imports": {
        "@dropins/tools/": "/node_modules/@dropins/tools/",
        "@dropins/storefront-recommendations/": "/node_modules/@dropins/storefront-recommendations/",
      }
    }
  </script>
  <script src="/scripts/scripts.js" type="module"></script>
    ```
  </TabItem>
    <TabItem label="custom" icon="seti:folder">
    This example shows an `importmap` added to a `head.html` The `importmap` points both packages to local directories that contain all the optimized/minified files from the drop-in component tools (@dropins/tools) and the product recommendations (@dropins/storefront-recommendations):

    ```html title="head.html"
    <script type="importmap">
      {
        "imports": {
          "@dropins/tools/": "/scripts/__dropins__/tools/",
          "@dropins/storefront-recommendations/": "/scripts/__dropins__/storefront-recommendations/",
        }
      }
    </script>
    <script src="/scripts/scripts.js" type="module"></script>
    ```

  </TabItem>
  <TabItem label="CDN" icon="external">
    This example shows an `importmap` pointing both packages to a CDN for the drop-in component tools (@dropins/tools) and the product recommendations (@dropins/storefront-recommendations):

    ```html title="index.html" {"Replace CDN URLs with correct URLs":5-7} del='https://cdn.jsdelivr.net/npm/'
    <head>
      <script type="importmap">
        {
          "imports": {

            "@dropins/tools/": "https://cdn.jsdelivr.net/npm/@dropins/tools@latest",
            "@dropins/storefront-recommendations/": "https://cdn.jsdelivr.net/npm/@dropins/storefront-recommendations@latest",
          }
        }
      </script>
    </head>
    ```

  </TabItem>

</Tabs>

With the `importmap` defined for both runtime and build-time environments, you can now **import the required files** from these packages into your product recommendations block as described in the next step.

</Task>

<Task>
### Import the required files (DRAFT)

Import the required files from the drop-in components tools (`@dropins/tools/fetch-graphql.js'`, `@dropin/tools/initializers.js`) and the product recommendations (`@dropins/storefront-recommendations`) into a JavaScript file for your product recommendations block. The example here shows the imports added to a `product-recommendations.js` file. These imports constitute the minimum imports you need to create a fully functioning product recommendations for your site:

```js title="product-recommendations.js"
// GraphQL Client
import * as mesh from '@dropins/tools/fetch-graphql.js';

// component tools
import { initializers } from '@dropins/tools/initializer.js';

// drop-in component functions
import * as pkg from '@dropins/storefront-recommendations/api.js';

// Drop-in component provider
import { render as provider } from '@dropins/storefront-recommendations/render.js';

// Drop-in component containers
import Recommendations from '@dropins/storefront-recommendations/containers/Recommendations.js';
```

</Task>

<Task>
### Connect to the endpoint (DRAFT)

Connect your product recommendations component to the Catalog Service GraphQL endpoint and set the required headers as shown in the example below. Replace the endpoint URL and header placeholder values with the actual values from your Commerce backend services:

```js title="product-recommendations.js"
// Set endpoint configuration
product.setEndpoint('https://<catalog-service-endpoint>/graphql');

product.setFetchGraphQlHeaders({
  // Environment required headers
  'Magento-Environment-Id': 'your-environment-id',
  'Magento-Store-View-Code': 'your-store-view-code',
  'Magento-Website-Code': 'your-website-code',
  'x-api-key': 'your-api-key',
  'Magento-Store-Code': 'main_website_store',
  'Magento-Customer-Group': 'your-customer-group',
  'Content-Type': 'application/json',
});
```

</Task>

<Task>
### Register and load the drop-in

The code below shows how to register the product recommendations component, load it (mount), and enable the logger for debugging purposes. You can add these functions within a `<script>` tag in your product recommendations HTML page as shown here:

```html title="index.html" ins={"1":5} ins={"2":8}
<script type="module">
  // more code above...

  // Register and load the product recommendations component
  initializers.mountImmediately(pdp.initialize);

  // Mount Initializers (must be called after all initializers are registered)
  window.addEventListener('load', initializers.mount);
</script>
```

<Callouts square color="var(--sl-color-green)">

1. This function registers the product recommendations component to be loaded on the page by the `initializers.mount` function.
1. This event handler triggers the initializers.mount function to load the product recommendations component after the page has loaded.

</Callouts>

</Task>

</Tasks>



## Configuration options (DRAFT)

| Option | Type | Description | Required |
|--------|------|-------------|----------|
| apiKey | string | Your Adobe Commerce API key | Yes |
| environment | string | The environment to use ('production' or 'staging') | Yes |
| storeView | string | The store view code | Yes |
| recommendationTypes | array | Types of recommendations to display | No |
| maxItems | number | Maximum number of items to display | No |
| placement | string | Where to display recommendations | No |

## Recommendation types (DRAFT)

The following recommendation types are available:

| Type | Description |
|------|-------------|
| viewed | Products viewed by other customers |
| bought | Products bought by other customers |
| related | Related products based on category |
| trending | Currently trending products |
| popular | Most popular products |
| recently-viewed | Recently viewed products by the current customer |

## Placement options (DRAFT)

You can place recommendations in various locations:

- Product page
- Category page
- Cart page
- Checkout page
- Home page
- Search results page
