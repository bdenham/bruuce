---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogPostCard from '../../components/ui/BlogPostCard.astro';
import PageHeader from '../../components/ui/PageHeader.astro';
import { pathWithBase } from '../../utils/base';

// Get all blog posts and sort by date (newest first)
const blogPosts = await getCollection('blog');
const sortedPosts = blogPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout
  title="Technical Writing Blog - Bruce Denham"
  description="Insights on developer experience, API documentation, technical writing, and making complex concepts clear by Bruce Denham."
  showBackLink={true}
  backLinkText="← Back to Home"
  backLinkHref={pathWithBase('/')}
  footerText="More insights coming soon! "
  footerLinkText="Connect with me on LinkedIn"
  footerLinkHref="https://linkedin.com/in/brucedenham/"
>
  <PageHeader accent="Technical Writing" primary="Blog" id="blog-title" />
  <p class="subtitle">
    Insights on developer experience, API documentation, and making complex concepts clear
  </p>

  {sortedPosts.map((post) => <BlogPostCard post={post} />)}
</BaseLayout>

<style>
  /* Blog listing specific styles - none needed, using common styles */
</style>
