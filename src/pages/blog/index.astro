---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import PageHeader from '../../components/ui/PageHeader.astro';
import Section from '../../components/ui/Section.astro';
import Grid from '../../components/ui/Grid.astro';
import Card from '../../components/ui/Card.astro';

const blogPosts = await getCollection('blog');
// Filter out draft posts in production
const publishedPosts = blogPosts.filter((post) => !post.data.draft);
const sortedPosts = publishedPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout
  title="My Blog - Bruce Denham"
  description="Reflections on technology, personal growth, life's complexities, and the human experience in our modern world."
  showBackLink={true}
  backLinkText="← Back to Home"
  backLinkHref="/"
  footerText="More insights coming soon! "
  footerLinkText="Connect with me on LinkedIn"
  footerLinkHref="https://linkedin.com/in/brucedenham/"
>
  <PageHeader primary="My" accent="Blog" class="page-title" />
  <p class="text-large lead animate-in animate-delay-100">
    Reflections on technology, writing, personal growth, life's existential challenges, and
    navigating the complexities of our modern world.
  </p>

  <Section class="animate-in animate-delay-150">
    <Grid variant="single" gap="medium">
      {
        sortedPosts.map((post) => (
          <Card
            title={post.data.title}
            href={`/blog/${post.slug}/`}
            ariaLabel={`Read: ${post.data.title}`}
          >
            <p class="post-meta">
              {post.data.date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })}
              {post.data.author && post.data.author !== 'Bruce Denham'
                ? ` • by ${post.data.author}`
                : ''}
            </p>
            <p class="post-excerpt">{post.data.excerpt}</p>
          </Card>
        ))
      }
    </Grid>
  </Section>

  <!-- LinkedIn Posts & Insights Section -->
  <Section
    title="LinkedIn Posts"
    class="animate-in animate-delay-200"
    aria-labelledby="linkedin-posts"
  >
    <p class="text-large intro">
      Thoughtful reflections I share on LinkedIn about kindness, personal growth, and authentic
      human connection — exploring how we grow, how we connect, and how our vulnerabilities can
      become our greatest strengths.
    </p>

    <Grid variant="single" gap="medium">
      <Card
        title="The Science of Kindness"
        href="https://www.linkedin.com/feed/update/urn:li:activity:7329128517764337665/"
        target="_blank"
        rel="noopener noreferrer"
        ariaLabel="Read LinkedIn post: The Science of Kindness"
      >
        <p class="platform-meta">LinkedIn • Creative Post • Recent</p>
        <p class="post-excerpt">
          What if kindness moved like diffusion—not with force, but with grace, filling absence with
          abundance, and longing with love? Let what's full in you flow where it's needed. That's
          how the world softens.
        </p>
      </Card>

      <Card
        title="What is Personal Growth?"
        href="https://www.linkedin.com/feed/update/urn:li:activity:7326230647159619585/"
        target="_blank"
        rel="noopener noreferrer"
        ariaLabel="Read LinkedIn post: What is Personal Growth?"
      >
        <p class="platform-meta">LinkedIn • Professional Update • Recent</p>
        <p class="post-excerpt">
          Why does personal growth often feel so elusive? One step forward, two steps back. Ten
          steps forward, wrong direction. Am I missing something? Maybe...Probably.
        </p>
      </Card>

      <Card
        title="Cracks Let the Light In"
        href="https://www.linkedin.com/feed/update/urn:li:activity:7326968144617492480/"
        target="_blank"
        rel="noopener noreferrer"
        ariaLabel="Read LinkedIn post: Cracks Let the Light In"
      >
        <p class="platform-meta">LinkedIn • Community Engagement • Recent</p>
        <p class="post-excerpt">
          We grow up thinking polish makes us lovable. So we shine the surface, hoping to be seen.
          But it's our presence, not perfection, that opens hearts. And it's our cracks that let the
          light in.
        </p>
      </Card>
    </Grid>
    <a
      href="https://linkedin.com/in/brucedenham/"
      target="_blank"
      rel="noopener noreferrer"
      class="linkedin-follow-btn"
    >
      Follow me on LinkedIn →
    </a>
  </Section>
</BaseLayout>

<style>
  /* Section divider for LinkedIn Posts section */
  .section-divider {
    height: 2px;
    background: linear-gradient(90deg, var(--accent-primary), transparent);
    border-radius: 1px;
    margin-bottom: 32px;
    max-width: 200px;
  }

  /* LinkedIn Follow Button */
  .linkedin-follow-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: var(--accent-primary);
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.3s ease;
    margin-top: 24px;
  }

  .linkedin-follow-btn:hover {
    background: var(--accent-secondary);
    transform: translateY(-2px);
    box-shadow: 0 8px 16px var(--shadow-primary);
  }

  /* Simple styling for blog post content */
  .post-meta {
    color: var(--text-tertiary);
    font-size: 0.9rem;
    margin: 0 0 0.5rem 0;
    font-weight: 400;
  }

  .platform-meta {
    color: var(--text-tertiary);
    font-size: 0.9rem;
    margin: 0 0 0.5rem 0;
    font-weight: 400;
  }

  .post-excerpt {
    color: var(--text-secondary);
    line-height: 1.6;
    margin: 0;
  }
</style>
